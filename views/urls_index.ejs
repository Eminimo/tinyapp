<!-- views/urls_index.ejs -->

<h3>My URLs</h3>

<% if (!username) { %>
  <!-- Display login form if not logged in -->
  <form method="POST" action="/login">
    <input type="text" name="username" placeholder="Username" />
    <button type="submit" class="btn btn-primary">Login</button>
  </form>
<% } else { %>
  <!-- Display username and logout form if logged in -->
  <p class="nav-item nav-link">Logged in as: <%= username %>!</p>
  <form method="POST" action="/logout">
    <button type="submit" class="btn btn-danger">Logout</button>
  </form>
<% } %>

<table>
  <thead>
    <tr>
      <th>Short URL ID</th>
      <th>Long URL</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% for (const id in urls) { %>
      <tr>
        <td><%= id %></td>
        <td><%= urls[id] %></td>
        <td>
          <!-- Add your details, edit, and delete links/buttons here -->
          <a href="/urls/<%= id %>">Details</a> |
          <a href="/urls/<%= id %>/edit">Edit</a> |
          <form method="POST" action="/urls/<%= id %>/delete">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    <% } %>
  </tbody>
</table>
